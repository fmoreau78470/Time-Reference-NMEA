<Window x:Class="TimeReference.App.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Paramètres" Height="600" Width="451"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0">
            <TextBlock Text="Configuration GPS" FontWeight="Bold" Margin="0,0,0,10"/>
            
            <!-- Port COM -->
            <DockPanel Margin="0,0,0,5">
                <TextBlock Text="Port Série :" Width="120" />
                <TextBox x:Name="TxtSerialPort" Width="143" HorizontalAlignment="Left"/>
            </DockPanel>

            <!-- Baud Rate -->
            <DockPanel Margin="0,0,0,5">
                <TextBlock Text="Vitesse (Bauds) :" Width="120" VerticalAlignment="Center"/>
                <ComboBox x:Name="CmbBaudRate" Width="116" HorizontalAlignment="Left">
                    <ComboBoxItem Content="4800"/>
                    <ComboBoxItem Content="9600"/>
                    <ComboBoxItem Content="19200"/>
                    <ComboBoxItem Content="38400"/>
                    <ComboBoxItem Content="57600"/>
                    <ComboBoxItem Content="115200"/>
                </ComboBox>
            </DockPanel>

            <!-- Fudge Time -->
            <DockPanel Margin="0,0,0,20">
                <TextBlock Text="Fudge Time2 (s) :" Width="120" VerticalAlignment="Center"/>
                <TextBox x:Name="TxtFudge" Width="115" HorizontalAlignment="Left"/>
            </DockPanel>

            <TextBlock Text="Configuration NTP" FontWeight="Bold" Margin="0,0,0,10"/>

            <!-- Chemin ntp.conf -->
            <TextBlock Text="Chemin fichier ntp.conf :" Margin="0,0,0,2"/>
            <TextBox x:Name="TxtNtpPath" Margin="0,0,0,10"/>

            <!-- Serveurs NTP -->
            <TextBlock Text="Serveurs NTP (un par ligne) :" Margin="0,0,0,2"/>
            <TextBox x:Name="TxtServers" Height="100" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" Margin="0,0,0,10"/>

            <!-- Options Serveurs -->
            <TextBlock Text="Options des serveurs (ex: iburst) :" Margin="0,0,0,2"/>
            <TextBox x:Name="TxtServerOptions" Margin="0,0,0,10"/>

            <!-- URL Meinberg -->
            <TextBlock Text="URL Téléchargement Meinberg :" Margin="0,0,0,2"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox x:Name="TxtMeinbergUrl" Grid.Column="0"/>
                <Button Grid.Column="1" Width="25" Height="20" Margin="5,0,0,0" Click="BtnTestUrl_Click" ToolTip="Ouvrir le lien dans le navigateur">
                    <Path Data="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" Fill="#444444" Stretch="Uniform" Width="12" Height="12"/>
                </Button>
            </Grid>

            <TextBlock Text="Affichage (Mode Mini)" FontWeight="Bold" Margin="0,10,0,10"/>
            
            <CheckBox x:Name="ChkMiniTop" Content="Toujours au premier plan" Margin="0,0,0,10"/>

            <DockPanel Margin="0,0,0,5">
                <TextBlock Text="Opacité :" Width="120" VerticalAlignment="Center"/>
                <StackPanel Orientation="Horizontal">
                    <Slider x:Name="SldMiniOpacity" Minimum="20" Maximum="100" Value="100" Width="150" TickFrequency="10" IsSnapToTickEnabled="True" VerticalAlignment="Center"/>
                    <TextBlock x:Name="LblOpacityValue" Text="100%" Margin="10,0,0,0" VerticalAlignment="Center" FontWeight="Bold"/>
                </StackPanel>
            </DockPanel>

        </StackPanel>

        <!-- Boutons -->
        <Button Grid.Row="1" Content="Moniteur NTP" Width="100" Height="30" Margin="0,15,0,0" HorizontalAlignment="Left" Click="BtnMonitor_Click"/>
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="Enregistrer" Width="100" Height="30" Margin="5" Click="BtnSave_Click"/>
            <Button Content="Annuler" Width="100" Height="30" Margin="5" Click="BtnCancel_Click"/>
        </StackPanel>
    </Grid>
</Window>
